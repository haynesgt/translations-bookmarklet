<a href="javascript:(()=>{function e(e){let t=localStorage.getItem(e);if(!t)return;let n=JSON.parse(t);if(!n.exp||Date.now()>n.exp){localStorage.removeItem(e);return}return n.value}let t=function(t,n=6048e5){let o=&quot;cacheWithLocalStorage&quot;+t.name;function a(...i){let r=o+JSON.stringify(i),s=e(r);if(s)return&quot;[object AsyncFunction]&quot;===Object.prototype.toString.call(t)?Promise.resolve(s):s;{let e=t(...i);function l(e){!function(e,t,n){let o=Date.now();localStorage.setItem(e,JSON.stringify({value:t,exp:o+n}))}(r,e,n)}return e instanceof Promise?e.then(e=>(l(e),e)):(l(e),e)}}return a.hasCachedValue=(...t)=>!!e(o+JSON.stringify(t)),a}(async function(e){let{sourceLanguage:t,targetLanguage:n,hostLanguage:o,query:a,type:i}=e,r=encodeURIComponent(a),s=Array.isArray(i)?i.join(&quot;&dt=&quot;):i,l=`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${t}&tl=${n}&hl=${o}&dt=${s}&dj=1&source=bubble&q=${r}`,c=await fetch(l);return await c.json()},6048e5);function n(e){let t,n;let o=document;if(o.caretPositionFromPoint){let a=o.caretPositionFromPoint(e.clientX,e.clientY);a&&(t=a.offsetNode,n=a.offset)}else if(o.caretRangeFromPoint){let a=o.caretRangeFromPoint(e.clientX,e.clientY);a&&(t=a.startContainer,n=a.startOffset)}return t&&t.textContent&&void 0!==n?[t.textContent,n]:[&quot;&quot;,0]}let o=[{lang:&quot;Spanish&quot;,code:&quot;es&quot;,score:100},{lang:&quot;French&quot;,code:&quot;fr&quot;,score:90},{lang:&quot;German&quot;,code:&quot;de&quot;,score:80},{lang:&quot;Italian&quot;,code:&quot;it&quot;,score:70},{lang:&quot;Portuguese&quot;,code:&quot;pt&quot;,score:60},{lang:&quot;Dutch&quot;,code:&quot;nl&quot;,score:50},{lang:&quot;Swedish&quot;,code:&quot;sv&quot;,score:40},{lang:&quot;Russian&quot;,code:&quot;ru&quot;,score:30},{lang:&quot;Japanese&quot;,code:&quot;ja&quot;,score:40},{lang:&quot;Chinese&quot;,code:&quot;zh&quot;,score:20},{lang:&quot;Korean&quot;,code:&quot;ko&quot;,score:30},{lang:&quot;Arabic&quot;,code:&quot;ar&quot;,score:20},{lang:&quot;Turkish&quot;,code:&quot;tr&quot;,score:30},{lang:&quot;Polish&quot;,code:&quot;pl&quot;,score:30},{lang:&quot;Danish&quot;,code:&quot;da&quot;,score:40},{lang:&quot;Norwegian&quot;,code:&quot;no&quot;,score:40},{lang:&quot;Finnish&quot;,code:&quot;fi&quot;,score:30},{lang:&quot;Greek&quot;,code:&quot;el&quot;,score:20},{lang:&quot;Czech&quot;,code:&quot;cs&quot;,score:30},{lang:&quot;Hungarian&quot;,code:&quot;hu&quot;,score:30},{lang:&quot;Romanian&quot;,code:&quot;ro&quot;,score:20},{lang:&quot;Indonesian&quot;,code:&quot;id&quot;,score:30},{lang:&quot;Hindi&quot;,code:&quot;hi&quot;,score:20},{lang:&quot;Hebrew&quot;,code:&quot;he&quot;,score:20},{lang:&quot;Thai&quot;,code:&quot;th&quot;,score:30},{lang:&quot;Vietnamese&quot;,code:&quot;vi&quot;,score:20},{lang:&quot;Bengali&quot;,code:&quot;bn&quot;,score:20},{lang:&quot;Tagalog&quot;,code:&quot;tl&quot;,score:30},{lang:&quot;Malay&quot;,code:&quot;ms&quot;,score:20},{lang:&quot;Ukrainian&quot;,code:&quot;uk&quot;,score:20},{lang:&quot;Slovak&quot;,code:&quot;sk&quot;,score:30},{lang:&quot;Lithuanian&quot;,code:&quot;lt&quot;,score:20},{lang:&quot;Slovenian&quot;,code:&quot;sl&quot;,score:30},{lang:&quot;Latvian&quot;,code:&quot;lv&quot;,score:20},{lang:&quot;Croatian&quot;,code:&quot;hr&quot;,score:30},{lang:&quot;Estonian&quot;,code:&quot;et&quot;,score:20},{lang:&quot;Serbian&quot;,code:&quot;sr&quot;,score:20},{lang:&quot;Bulgarian&quot;,code:&quot;bg&quot;,score:20},{lang:&quot;Icelandic&quot;,code:&quot;is&quot;,score:30},{lang:&quot;Faroese&quot;,code:&quot;fo&quot;,score:20},{lang:&quot;Greenlandic&quot;,code:&quot;kl&quot;,score:10},{lang:&quot;Basque&quot;,code:&quot;eu&quot;,score:20},{lang:&quot;Catalan&quot;,code:&quot;ca&quot;,score:30},{lang:&quot;Galician&quot;,code:&quot;gl&quot;,score:20},{lang:&quot;Welsh&quot;,code:&quot;cy&quot;,score:20},{lang:&quot;Irish&quot;,code:&quot;ga&quot;,score:20},{lang:&quot;Scottish Gaelic&quot;,code:&quot;gd&quot;,score:20},{lang:&quot;Maori&quot;,code:&quot;mi&quot;,score:10}].sort((e,t)=>t.score-e.score);function a(e,t,n){return Math.min(Math.max(e,t),n)}class i{register(){let e=document.createElement(&quot;div&quot;);Object.assign(e.style,{position:&quot;fixed&quot;,display:&quot;none&quot;,pointerEvents:&quot;none&quot;,zIndex:&quot;1000&quot;,backgroundColor:&quot;white&quot;,padding:&quot;2px&quot;,border:&quot;1px solid black&quot;,borderRadius:&quot;2px&quot;,left:&quot;0px&quot;,top:&quot;0px&quot;}),document.body.appendChild(e),this.element=e,this.freezeUntil=0}unregister(){this.requireElement()&&(this.hideTimeout&&(clearTimeout(this.hideTimeout),delete this.hideTimeout),document.body.removeChild(this.element),delete this.element)}requireElement(){if(void 0==this.element)throw Error(&quot;Tooltip is not registered&quot;);return this.element}setPosition(e,t){Object.assign(this.position,{x:e,y:t});let n=this.requireElement(),o=document.documentElement.offsetWidth;document.documentElement.offsetHeight;let i=a(e-n.offsetWidth/2,0,o-n.offsetWidth),r=a(t+30,0,window.innerHeight-n.offsetHeight);n.style.transform=`translate(${i}px, ${r}px)`}reposition(){this.setPosition(this.position.x,this.position.y)}move(e){requestAnimationFrame(()=>{this.setPosition(e.clientX,e.clientY)})}show(e,t=0){let n=this.requireElement(),o=Date.now();o<this.freezeUntil||(n.style.display=&quot;block&quot;,n.innerText=e,this.freezeUntil=o+t,this.hideAfterTimeout(3e4),this.reposition())}hideAfterTimeout(e){this.hideTimeout&&clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(()=>this.hide(),e)}hide(){this.requireElement().style.display=&quot;none&quot;}isOver(e){let t=this.requireElement().getBoundingClientRect(),n=e.clientX,o=e.clientY;return n>=t.left&&n<=t.right&&o>=t.top&&o<=t.bottom}constructor(){this.freezeUntil=0,this.position={x:0,y:0}}}let r=&quot;[\\p{L}\\p{N}\\p{M}\\p{Pd}']&quot;;function s(e,t,n){return Math.min(Math.max(e,t),n)}let l=window,c=&quot;translationSourceLanguage&quot;;async function u(e,n=1e3,o={}){let a=[...e.matchAll(/[^\p{P}\s\u4e00-\u9fff]+|[\u4e00-\u9fff]/gu)].map(e=>e[0]);for(let e of(a.sort(()=>Math.random()-.5),a)){if(o.cancel)return;if(e.length>20)continue;let a=h(e);if(!t.hasCachedValue(a)){console.log(&quot;fetching&quot;,e),await new Promise(e=>setTimeout(e,n));try{await t(a)}catch(e){console.error(e),n*=2}}}}function g(){let e=l.translationSourceLanguage||&quot;auto&quot;;return&quot;auto&quot;===e&&l.lastLanguage&&Date.now()-(l.lastLanguageTime||0)<1e4?l.lastLanguage:e}function d(){return l.translationTargetLanguage||&quot;en&quot;}function h(e){return{sourceLanguage:g(),targetLanguage:d(),hostLanguage:navigator?.language?.slice(0,2)||&quot;en-US&quot;,query:e,type:[&quot;t&quot;,&quot;bd&quot;,&quot;rm&quot;]}}async function m(e){if(l.translationTooltip?.isOver(e))return;let o=m.lastCalled||0;m.lastCalled=Date.now();let a=Date.now()-o>500,i=function(e){let[t,o]=n(e);if(t)return function(e,t){let n=e.slice(0,t),o=e.slice(t);if((n.slice(-1)+o.slice(0,1)).match(/^[\u4e00-\u9fff]/))return o[0];let a=n.match(RegExp(`(${r}*)$`,&quot;u&quot;)),i=o.match(RegExp(`^(${r}+)`,&quot;u&quot;));if(i||a)return(a&&a[1]||&quot;&quot;)+(i&&i[1]||&quot;&quot;)}(t,o)}(e);if(i){let n=h(i),o=t.hasCachedValue(n);if(!a&&!o){m.cancel&&m.cancel();let t=setTimeout(()=>m(e),500);m.cancel=()=>{clearTimeout(t),m.cancel=void 0},l.translationTooltip?.show(i+&quot;: ...&quot;);return}let r=await t(n),s=r.dict?.[0],c=s?.entry,u=r.sentences?.map(e=>e.src_translit).filter(e=>e)||[],g=i+(u.length?&quot; (&quot;+u.join(&quot; / &quot;)+&quot;)&quot;:&quot;&quot;),d=&quot;&quot;;if(c&&c.length){let e=c.filter(e=>(e.score||0)>.25).map(e=>e.word)||[],t=c.filter(e=>.25>=(e.score||0)).map(e=>e.word).slice(0,3)||[];d=e.join(&quot; / &quot;)+(t.length?&quot; (&quot;+t.join(&quot; / &quot;)+&quot;)&quot;:&quot;&quot;)}else r.sentences&&r.sentences.length&&(d=r.sentences?.map(e=>e.trans).filter(e=>e).join(&quot; / &quot;)||&quot;&quot;);d&&l.translationTooltip?.show(g+&quot;: &quot;+d)}else l.translationTooltip?.hide()}async function f(e){let[o,a]=n(e),i=50*Math.round(a/50),r=o.slice(s(i-50,0,Math.max(0,o.length-100)),s(i+50,Math.min(100,o.length),o.length)),c=a>50?r.replace(/^[^\p{P}\s]+\s*/u,&quot;&quot;):r,h=a<o.length-50?c.replace(/\s*[^\p{P}\s]+$/u,&quot;&quot;):c;if(u(h,100),h){let e={sourceLanguage:g(),targetLanguage:d(),hostLanguage:navigator?.language?.slice(0,2)||&quot;en-US&quot;,query:h,type:[&quot;t&quot;,&quot;rm&quot;]},n=await t(e);l.translationTooltip?.show(n.sentences?.map(e=>e.trans||e.src_translit).join(&quot;\n&quot;)||&quot;Error&quot;,1e3)}}function p(e){l.translationTooltip?.move(e),m(e)}function y(){l.translationTooltip=new i,l.translationTooltip.register(),function(){let e;let t=localStorage.getItem(c),n=document.documentElement.lang?.slice(0,2)||&quot;auto&quot;;if(t&&!l.translationSourceLanguage)e=t||n;else{let t=o.map(e=>`${e.code} - ${e.lang}`).join(&quot;\n&quot;);e=prompt(&quot;Source language\nauto - auto\n&quot;+t,n)}e&&(l.translationSourceLanguage=e,localStorage.setItem(c,e))}();let e=(document.addEventListener(&quot;mousemove&quot;,p),document.addEventListener(&quot;mousedown&quot;,f),()=>{document.removeEventListener(&quot;mousemove&quot;,p),document.removeEventListener(&quot;mousedown&quot;,f)}),t=function(){async function e(t){let n=document.body.innerText;await u(n,1e3,t),await new Promise(e=>setTimeout(e,1e3)),setTimeout(()=>e(t))}if(l.isFetchingRandomWords)return()=>{};l.isFetchingRandomWords=!0;let t={cancel:!1};return e(t),()=>{t.cancel=!0,l.isFetchingRandomWords=!1}}();l.cancelTranslator=()=>{e(),t(),delete l.cancelTranslator}}&quot;loading&quot;===document.readyState?document.addEventListener(&quot;DOMContentLoaded&quot;,y):y()})();
//# sourceMappingURL=index.js.map
">Right click + copy link address then create bookmark in bookmarks bar + paste</a>
